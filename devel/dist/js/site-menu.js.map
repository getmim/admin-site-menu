{"version":3,"file":"site-menu.js","sources":["../../src/js/nestable.js","../../src/js/site-menu.js"],"sourcesContent":["/*!\n * Nestable jQuery Plugin - Copyright (c) 2012 David Bushell - http://dbushell.com/\n * Dual-licensed under the BSD or MIT licenses\n */\n;(function($, window, document, undefined)\n{\n    var hasTouch = 'ontouchstart' in document;\n\n    /**\n     * Detect CSS pointer-events property\n     * events are normally disabled on the dragging element to avoid conflicts\n     * https://github.com/ausi/Feature-detection-technique-for-pointer-events/blob/master/modernizr-pointerevents.js\n     */\n    var hasPointerEvents = (function()\n    {\n        var el    = document.createElement('div'),\n            docEl = document.documentElement;\n        if (!('pointerEvents' in el.style)) {\n            return false;\n        }\n        el.style.pointerEvents = 'auto';\n        el.style.pointerEvents = 'x';\n        docEl.appendChild(el);\n        var supports = window.getComputedStyle && window.getComputedStyle(el, '').pointerEvents === 'auto';\n        docEl.removeChild(el);\n        return !!supports;\n    })();\n\n    var defaults = {\n            listNodeName    : 'ol',\n            itemNodeName    : 'li',\n            rootClass       : 'dd',\n            listClass       : 'dd-list',\n            itemClass       : 'dd-item',\n            dragClass       : 'dd-dragel',\n            handleClass     : 'dd-handle',\n            collapsedClass  : 'dd-collapsed',\n            placeClass      : 'dd-placeholder',\n            noDragClass     : 'dd-nodrag',\n            emptyClass      : 'dd-empty',\n            expandBtnHTML   : '<button data-action=\"expand\" type=\"button\">Expand</button>',\n            collapseBtnHTML : '<button data-action=\"collapse\" type=\"button\">Collapse</button>',\n            group           : 0,\n            maxDepth        : 5,\n            threshold       : 20\n        };\n\n    function Plugin(element, options)\n    {\n        this.w  = $(document);\n        this.el = $(element);\n        this.options = $.extend({}, defaults, options);\n        this.init();\n    }\n\n    Plugin.prototype = {\n\n        init: function()\n        {\n            var list = this;\n\n            list.reset();\n\n            list.el.data('nestable-group', this.options.group);\n\n            list.placeEl = $('<div class=\"' + list.options.placeClass + '\"/>');\n\n            $.each(this.el.find(list.options.itemNodeName), function(k, el) {\n                list.setParent($(el));\n            });\n\n            list.el.on('click', 'button', function(e) {\n                if (list.dragEl) {\n                    return;\n                }\n                var target = $(e.currentTarget),\n                    action = target.data('action'),\n                    item   = target.parent(list.options.itemNodeName);\n                if (action === 'collapse') {\n                    list.collapseItem(item);\n                }\n                if (action === 'expand') {\n                    list.expandItem(item);\n                }\n            });\n\n            var onStartEvent = function(e)\n            {\n                var handle = $(e.target);\n                if (!handle.hasClass(list.options.handleClass)) {\n                    if (handle.closest('.' + list.options.noDragClass).length) {\n                        return;\n                    }\n                    handle = handle.closest('.' + list.options.handleClass);\n                }\n\n                if (!handle.length || list.dragEl) {\n                    return;\n                }\n\n                list.isTouch = /^touch/.test(e.type);\n                if (list.isTouch && e.touches.length !== 1) {\n                    return;\n                }\n\n                e.preventDefault();\n                list.dragStart(e.touches ? e.touches[0] : e);\n            };\n\n            var onMoveEvent = function(e)\n            {\n                if (list.dragEl) {\n                    e.preventDefault();\n                    list.dragMove(e.touches ? e.touches[0] : e);\n                }\n            };\n\n            var onEndEvent = function(e)\n            {\n                if (list.dragEl) {\n                    e.preventDefault();\n                    list.dragStop(e.touches ? e.touches[0] : e);\n                }\n            };\n\n            if (hasTouch) {\n                list.el[0].addEventListener('touchstart', onStartEvent, false);\n                window.addEventListener('touchmove', onMoveEvent, false);\n                window.addEventListener('touchend', onEndEvent, false);\n                window.addEventListener('touchcancel', onEndEvent, false);\n            }\n\n            list.el.on('mousedown', onStartEvent);\n            list.w.on('mousemove', onMoveEvent);\n            list.w.on('mouseup', onEndEvent);\n\n        },\n\n        serialize: function()\n        {\n            var data,\n                depth = 0,\n                list  = this,\n                step  = function(level, depth)\n                {\n                    var array = [ ],\n                        items = level.children(list.options.itemNodeName);\n                    items.each(function()\n                    {\n                        var li   = $(this),\n                            item = $.extend({}, li.data()),\n                            sub  = li.children(list.options.listNodeName);\n                        if (sub.length) {\n                            item.children = step(sub, depth + 1);\n                        }\n                        array.push(item);\n                    });\n                    return array;\n                };\n            data = step(list.el.find(list.options.listNodeName).first(), depth);\n            return data;\n        },\n\n        serialise: function()\n        {\n            return this.serialize();\n        },\n\n        reset: function()\n        {\n            this.mouse = {\n                offsetX   : 0,\n                offsetY   : 0,\n                startX    : 0,\n                startY    : 0,\n                lastX     : 0,\n                lastY     : 0,\n                nowX      : 0,\n                nowY      : 0,\n                distX     : 0,\n                distY     : 0,\n                dirAx     : 0,\n                dirX      : 0,\n                dirY      : 0,\n                lastDirX  : 0,\n                lastDirY  : 0,\n                distAxX   : 0,\n                distAxY   : 0\n            };\n            this.isTouch    = false;\n            this.moving     = false;\n            this.dragEl     = null;\n            this.dragRootEl = null;\n            this.dragDepth  = 0;\n            this.hasNewRoot = false;\n            this.pointEl    = null;\n        },\n\n        expandItem: function(li)\n        {\n            li.removeClass(this.options.collapsedClass);\n            li.children('[data-action=\"expand\"]').hide();\n            li.children('[data-action=\"collapse\"]').show();\n            li.children(this.options.listNodeName).show();\n        },\n\n        collapseItem: function(li)\n        {\n            var lists = li.children(this.options.listNodeName);\n            if (lists.length) {\n                li.addClass(this.options.collapsedClass);\n                li.children('[data-action=\"collapse\"]').hide();\n                li.children('[data-action=\"expand\"]').show();\n                li.children(this.options.listNodeName).hide();\n            }\n        },\n\n        expandAll: function()\n        {\n            var list = this;\n            list.el.find(list.options.itemNodeName).each(function() {\n                list.expandItem($(this));\n            });\n        },\n\n        collapseAll: function()\n        {\n            var list = this;\n            list.el.find(list.options.itemNodeName).each(function() {\n                list.collapseItem($(this));\n            });\n        },\n\n        setParent: function(li)\n        {\n            if (li.children(this.options.listNodeName).length) {\n                li.prepend($(this.options.expandBtnHTML));\n                li.prepend($(this.options.collapseBtnHTML));\n            }\n            li.children('[data-action=\"expand\"]').hide();\n        },\n\n        unsetParent: function(li)\n        {\n            li.removeClass(this.options.collapsedClass);\n            li.children('[data-action]').remove();\n            li.children(this.options.listNodeName).remove();\n        },\n\n        dragStart: function(e)\n        {\n            var mouse    = this.mouse,\n                target   = $(e.target),\n                dragItem = target.closest(this.options.itemNodeName);\n\n            this.placeEl.css('height', dragItem.height());\n\n            mouse.offsetX = e.offsetX !== undefined ? e.offsetX : e.pageX - target.offset().left;\n            mouse.offsetY = e.offsetY !== undefined ? e.offsetY : e.pageY - target.offset().top;\n            mouse.startX = mouse.lastX = e.pageX;\n            mouse.startY = mouse.lastY = e.pageY;\n\n            this.dragRootEl = this.el;\n\n            this.dragEl = $(document.createElement(this.options.listNodeName)).addClass(this.options.listClass + ' ' + this.options.dragClass);\n            this.dragEl.css('width', dragItem.width());\n\n            dragItem.after(this.placeEl);\n            dragItem[0].parentNode.removeChild(dragItem[0]);\n            dragItem.appendTo(this.dragEl);\n\n            $(document.body).append(this.dragEl);\n            this.dragEl.css({\n                'left' : e.pageX - mouse.offsetX,\n                'top'  : e.pageY - mouse.offsetY\n            });\n            // total depth of dragging item\n            var i, depth,\n                items = this.dragEl.find(this.options.itemNodeName);\n            for (i = 0; i < items.length; i++) {\n                depth = $(items[i]).parents(this.options.listNodeName).length;\n                if (depth > this.dragDepth) {\n                    this.dragDepth = depth;\n                }\n            }\n        },\n\n        dragStop: function(e)\n        {\n            var el = this.dragEl.children(this.options.itemNodeName).first();\n            el[0].parentNode.removeChild(el[0]);\n            this.placeEl.replaceWith(el);\n\n            this.dragEl.remove();\n            this.el.trigger('change');\n            if (this.hasNewRoot) {\n                this.dragRootEl.trigger('change');\n            }\n            this.reset();\n        },\n\n        dragMove: function(e)\n        {\n            var list, parent, prev, next, depth,\n                opt   = this.options,\n                mouse = this.mouse;\n\n            this.dragEl.css({\n                'left' : e.pageX - mouse.offsetX,\n                'top'  : e.pageY - mouse.offsetY\n            });\n\n            // mouse position last events\n            mouse.lastX = mouse.nowX;\n            mouse.lastY = mouse.nowY;\n            // mouse position this events\n            mouse.nowX  = e.pageX;\n            mouse.nowY  = e.pageY;\n            // distance mouse moved between events\n            mouse.distX = mouse.nowX - mouse.lastX;\n            mouse.distY = mouse.nowY - mouse.lastY;\n            // direction mouse was moving\n            mouse.lastDirX = mouse.dirX;\n            mouse.lastDirY = mouse.dirY;\n            // direction mouse is now moving (on both axis)\n            mouse.dirX = mouse.distX === 0 ? 0 : mouse.distX > 0 ? 1 : -1;\n            mouse.dirY = mouse.distY === 0 ? 0 : mouse.distY > 0 ? 1 : -1;\n            // axis mouse is now moving on\n            var newAx   = Math.abs(mouse.distX) > Math.abs(mouse.distY) ? 1 : 0;\n\n            // do nothing on first move\n            if (!mouse.moving) {\n                mouse.dirAx  = newAx;\n                mouse.moving = true;\n                return;\n            }\n\n            // calc distance moved on this axis (and direction)\n            if (mouse.dirAx !== newAx) {\n                mouse.distAxX = 0;\n                mouse.distAxY = 0;\n            } else {\n                mouse.distAxX += Math.abs(mouse.distX);\n                if (mouse.dirX !== 0 && mouse.dirX !== mouse.lastDirX) {\n                    mouse.distAxX = 0;\n                }\n                mouse.distAxY += Math.abs(mouse.distY);\n                if (mouse.dirY !== 0 && mouse.dirY !== mouse.lastDirY) {\n                    mouse.distAxY = 0;\n                }\n            }\n            mouse.dirAx = newAx;\n\n            /**\n             * move horizontal\n             */\n            if (mouse.dirAx && mouse.distAxX >= opt.threshold) {\n                // reset move distance on x-axis for new phase\n                mouse.distAxX = 0;\n                prev = this.placeEl.prev(opt.itemNodeName);\n                // increase horizontal level if previous sibling exists and is not collapsed\n                if (mouse.distX > 0 && prev.length && !prev.hasClass(opt.collapsedClass)) {\n                    // cannot increase level when item above is collapsed\n                    list = prev.find(opt.listNodeName).last();\n                    // check if depth limit has reached\n                    depth = this.placeEl.parents(opt.listNodeName).length;\n                    if (depth + this.dragDepth <= opt.maxDepth) {\n                        // create new sub-level if one doesn't exist\n                        if (!list.length) {\n                            list = $('<' + opt.listNodeName + '/>').addClass(opt.listClass);\n                            list.append(this.placeEl);\n                            prev.append(list);\n                            this.setParent(prev);\n                        } else {\n                            // else append to next level up\n                            list = prev.children(opt.listNodeName).last();\n                            list.append(this.placeEl);\n                        }\n                    }\n                }\n                // decrease horizontal level\n                if (mouse.distX < 0) {\n                    // we can't decrease a level if an item preceeds the current one\n                    next = this.placeEl.next(opt.itemNodeName);\n                    if (!next.length) {\n                        parent = this.placeEl.parent();\n                        this.placeEl.closest(opt.itemNodeName).after(this.placeEl);\n                        if (!parent.children().length) {\n                            this.unsetParent(parent.parent());\n                        }\n                    }\n                }\n            }\n\n            var isEmpty = false;\n\n            // find list item under cursor\n            if (!hasPointerEvents) {\n                this.dragEl[0].style.visibility = 'hidden';\n            }\n            this.pointEl = $(document.elementFromPoint(e.pageX - document.body.scrollLeft, e.pageY - (window.pageYOffset || document.documentElement.scrollTop)));\n            if (!hasPointerEvents) {\n                this.dragEl[0].style.visibility = 'visible';\n            }\n            if (this.pointEl.hasClass(opt.handleClass)) {\n                this.pointEl = this.pointEl.parent(opt.itemNodeName);\n            }\n            if (this.pointEl.hasClass(opt.emptyClass)) {\n                isEmpty = true;\n            }\n            else if (!this.pointEl.length || !this.pointEl.hasClass(opt.itemClass)) {\n                return;\n            }\n\n            // find parent list of item under cursor\n            var pointElRoot = this.pointEl.closest('.' + opt.rootClass),\n                isNewRoot   = this.dragRootEl.data('nestable-id') !== pointElRoot.data('nestable-id');\n\n            /**\n             * move vertical\n             */\n            if (!mouse.dirAx || isNewRoot || isEmpty) {\n                // check if groups match if dragging over new root\n                if (isNewRoot && opt.group !== pointElRoot.data('nestable-group')) {\n                    return;\n                }\n                // check depth limit\n                depth = this.dragDepth - 1 + this.pointEl.parents(opt.listNodeName).length;\n                if (depth > opt.maxDepth) {\n                    return;\n                }\n                var before = e.pageY < (this.pointEl.offset().top + this.pointEl.height() / 2);\n                    parent = this.placeEl.parent();\n                // if empty create new list to replace empty placeholder\n                if (isEmpty) {\n                    list = $(document.createElement(opt.listNodeName)).addClass(opt.listClass);\n                    list.append(this.placeEl);\n                    this.pointEl.replaceWith(list);\n                }\n                else if (before) {\n                    this.pointEl.before(this.placeEl);\n                }\n                else {\n                    this.pointEl.after(this.placeEl);\n                }\n                if (!parent.children().length) {\n                    this.unsetParent(parent.parent());\n                }\n                if (!this.dragRootEl.find(opt.itemNodeName).length) {\n                    this.dragRootEl.append('<div class=\"' + opt.emptyClass + '\"/>');\n                }\n                // parent root list has changed\n                if (isNewRoot) {\n                    this.dragRootEl = pointElRoot;\n                    this.hasNewRoot = this.el[0] !== this.dragRootEl[0];\n                }\n            }\n        }\n\n    };\n\n    $.fn.nestable = function(params)\n    {\n        var lists  = this,\n            retval = this;\n\n        lists.each(function()\n        {\n            var plugin = $(this).data(\"nestable\");\n\n            if (!plugin) {\n                $(this).data(\"nestable\", new Plugin(this, params));\n                $(this).data(\"nestable-id\", new Date().getTime());\n            } else {\n                if (typeof params === 'string' && typeof plugin[params] === 'function') {\n                    retval = plugin[params]();\n                }\n            }\n        });\n\n        return retval || lists;\n    };\n\n})(window.jQuery || window.Zepto, window, document);\n\nexport default 'Nestable';","/**\n * --------------------------------------------------------------------------\n * Admin Site Menu (v0.0.1): site-menu.js\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\n// import Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME               = 'sitemenu'\nconst VERSION            = '0.0.1'\nconst DATA_KEY           = 'bs.sitemenu'\nconst EVENT_KEY          = `.${DATA_KEY}`\nconst DATA_API_KEY       = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\n\nconst Default = {}\nconst DefaultType = {}\n\nconst Event = {\n    LOAD_DATA_API           : `load${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {}\n\nconst Selector = {\n    editor: '.site-menu-editor'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass SiteMenu {\n\n    constructor(element) {\n        this._element = element\n        this._model   = document.querySelector(element.dataset.model)\n        this._form    = document.querySelector(element.dataset.form)\n        this._value   = []\n        this._active  = null\n\n        if(this._model.value)\n            this._value   = JSON.parse(this._model.value) || []\n\n        if(!this._value)\n            this._model.value = ''\n        else\n            this.render(this._value, this._element)\n\n        this.addElementsListener()\n\n        $(this._element)\n        .nestable({\n            collapseBtnHTML : '',\n            dragClass       : 'site-menu-item-drag',\n            expandBtnHTML   : '',\n            handleClass     : 'site-menu-item-handle',\n            itemClass       : 'site-menu-item',\n            listClass       : 'site-menu-list',\n            maxDepth        : 100,\n            placeClass      : 'site-menu-item-placeholder',\n            rootClass       : 'site-menu-editor'\n        })\n        .on('change', () => {\n            this.updateModel()\n        })\n    }\n\n    addElementsListener(){\n        $(this._element)\n            .on('click', '.btn-menu-edit', e => {\n                this._active = e.currentTarget.parentNode.parentNode\n                this.editMenu(this._active.dataset.label, this._active.dataset.link)\n            })\n            .on('click', '.btn-menu-add', () => {\n                this._active = null\n                this.editMenu('', '')\n            })\n            .on('click', '.btn-menu-remove', e => {\n                this._active = e.currentTarget.parentNode.parentNode\n\n                $.dialog.confirm('Remove Confirmation', 'Are you sure want to remove this menu?', res => {\n                    if(!res)\n                        return\n\n                    $(this._active).slideUp(() => {\n                        $(this._active).remove()\n                        this._active = null\n                        this.updateModel()\n                    })\n                })\n            })\n\n        $(this._form)\n            .on('show.bs.modal', () => this._form.classList.remove('was-validated'))\n            .on('shown.bs.modal', () => this._form.label.select())\n            .on('submit', e => {\n                e.preventDefault()\n\n                let value = {\n                    label: this._form.elements.label.value,\n                    link : this._form.elements.link.value\n                }\n\n                if(!value.label || !value.link)\n                    return\n\n                // update exists menu\n                if(this._active){\n                    this._active.dataset.label = value.label\n                    this._active.dataset.link  = value.link\n                    $(this._active).data('label', value.label)\n                    $(this._active).data('link', value.link)\n                    $(this._active).find('> .site-menu-item-handle > .site-menu-item-label').text(value.label)\n                    $(this._active).find('> .site-menu-item-handle > .site-menu-item-link').text(value.link)\n\n                    this._active = null\n                }else{\n                    let parent = $(this._element).children('.site-menu-list')[0]\n                    if(parent)\n                        this.makeItem(value).appendTo(parent)\n                    else\n                        this.render([value])\n                }\n\n                $(this._form).modal('hide')\n                this.updateModel()\n            })\n    }\n\n    editMenu(label, link){\n        this._form.label.value = label\n        this._form.link.value  = link\n        $(this._form).modal('show')\n    }\n\n    hs(str){\n        let map = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', \"'\": '&#039;' }\n        return str.replace(/[&<>\"']/g, function(m) { return map[m]; });\n    }\n\n    makeItem(item){\n        let safe = {\n                label : this.hs(item.label),\n                link  : this.hs(item.link)\n            },\n            tmpl = `\n                <li class=\"site-menu-item\" data-label=\"${safe.label}\" data-link=\"${safe.link}\">\n                    <div class=\"btn-group btn-group-sm\" role=\"group\" aria-label=\"Menu Action\">\n                        <button type=\"button\" class=\"btn btn-light btn-menu-edit\" title=\"Edit\">\n                            <i class=\"fas fa-edit\"></i>\n                        </button>\n                        <button type=\"button\" class=\"btn btn-light btn-menu-remove\" title=\"Remove\">\n                            <i class=\"fas fa-trash-alt\"></i>\n                        </button>\n                    </div>\n                    <div class=\"site-menu-item-handle\">\n                        <div class=\"site-menu-item-label\">${safe.label}</div>\n                        <small style=\"display:block\" class=\"text-truncate site-menu-item-link\">${safe.link}</small>\n                    </div>\n                </li>`,\n            eItem = $(tmpl)\n\n        if(item.children)\n            this.render(item.children, eItem)\n\n        return eItem\n    }\n\n    render(items, cont){\n        let eList = $('<ol class=\"site-menu-list\"></ol>').appendTo(cont)\n        items.forEach(item => this.makeItem(item).appendTo(eList))\n    }\n\n    updateModel(){\n        this._value = $(this._element).nestable('serialize')\n        console.log(this._value)\n        this._model.value = this._value.length ? JSON.stringify(this._value) : ''\n    }\n\n    // Static\n\n    static _jQueryInterface(config, relatedTarget) {\n        return this.each(function () {\n            let data = $(this).data(DATA_KEY)\n            if(data)\n                return\n            $(this).data(DATA_KEY, new SiteMenu(this))\n        })\n    }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = SiteMenu._jQueryInterface\n$.fn[NAME].Constructor = SiteMenu\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return SiteMenu._jQueryInterface\n}\n\n$(window).on(Event.LOAD_DATA_API, () => {\n    $(Selector.editor).sitemenu()\n})\n\nexport default SiteMenu"],"names":["$","window","document","undefined","hasTouch","hasPointerEvents","el","createElement","docEl","documentElement","style","pointerEvents","appendChild","supports","getComputedStyle","removeChild","defaults","listNodeName","itemNodeName","rootClass","listClass","itemClass","dragClass","handleClass","collapsedClass","placeClass","noDragClass","emptyClass","expandBtnHTML","collapseBtnHTML","group","maxDepth","threshold","Plugin","element","options","w","extend","init","prototype","list","reset","data","placeEl","each","find","k","setParent","on","e","dragEl","target","currentTarget","action","item","parent","collapseItem","expandItem","onStartEvent","handle","hasClass","closest","length","isTouch","test","type","touches","preventDefault","dragStart","onMoveEvent","dragMove","onEndEvent","dragStop","addEventListener","serialize","step","level","depth","array","items","children","li","sub","push","first","serialise","mouse","offsetX","offsetY","startX","startY","lastX","lastY","nowX","nowY","distX","distY","dirAx","dirX","dirY","lastDirX","lastDirY","distAxX","distAxY","moving","dragRootEl","dragDepth","hasNewRoot","pointEl","removeClass","hide","show","lists","addClass","expandAll","collapseAll","prepend","unsetParent","remove","dragItem","css","height","pageX","offset","left","pageY","top","width","after","parentNode","appendTo","body","append","i","parents","replaceWith","trigger","prev","next","opt","newAx","Math","abs","last","isEmpty","visibility","elementFromPoint","scrollLeft","pageYOffset","scrollTop","pointElRoot","isNewRoot","before","fn","nestable","params","retval","plugin","Date","getTime","jQuery","Zepto","NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","Event","LOAD_DATA_API","Selector","editor","SiteMenu","_element","_model","querySelector","dataset","model","_form","form","_value","_active","value","JSON","parse","render","addElementsListener","updateModel","editMenu","label","link","dialog","confirm","res","slideUp","classList","select","elements","text","makeItem","modal","hs","str","map","replace","m","safe","tmpl","eItem","cont","eList","forEach","console","log","stringify","_jQueryInterface","config","relatedTarget","Constructor","noConflict","sitemenu"],"mappings":"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"}